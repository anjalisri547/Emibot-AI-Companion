(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[743,907],{745:()=>{},3082:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(5043),i=r(4790);const o=r.p+"static/media/bot1.03d9c7cfddac41707706.png";var s=r(930),a=r(6667),c=r(579);function l(){const[e,t]=(0,n.useState)(!1),[r,l]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),g=(0,n.useRef)(null),{addGoal:f}=(0,i.Q)();(0,n.useEffect)(()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return void alert("Your browser does not support Speech Recognition.");const r=new e;r.lang="en-US",r.continuous=!0,r.interimResults=!0,r.onresult=e=>{let t="";for(let r=e.resultIndex;r<e.results.length;r++)t+=e.results[r][0].transcript;l(t),e.results[e.results.length-1].isFinal&&m(t)},r.onend=()=>t(!1),g.current=r},[]);const m=async e=>{const t=e.toLowerCase();(t.includes("i want to")||t.includes("remind me to"))&&f(e);let r="";try{r=await async function(e){try{const t=await fetch("http://localhost:5500/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});return(await t.json()).reply}catch(t){return console.error(t),"Sorry, I couldn't think of a reply."}}(e)}catch(n){r="Sorry, I couldn't process that.",console.error("OpenAI reply error:",n)}u(r),b(r);try{await(0,a.gS)((0,a.rJ)(s.db,"conversations"),{user:e,bot:r,createdAt:a.Dc.now()}),p("\u2705 Conversation saved to Firebase!"),console.log("Conversation saved to Firebase:",{user:e,bot:r})}catch(i){p("\u274c Failed to save conversation."),console.error("Firebase save error:",i)}setTimeout(()=>p(""),5e3)},b=e=>{if(!window.speechSynthesis)return;const t=new SpeechSynthesisUtterance(e);t.lang="en-US",t.pitch=1,t.rate=1,window.speechSynthesis.speak(t)};return(0,c.jsxs)("div",{className:"voice-bot-container",children:[(0,c.jsx)("div",{className:"voice-bot-right",children:(0,c.jsx)("img",{src:o,alt:"Voice AI"})}),(0,c.jsxs)("div",{className:"voice-bot-left",children:[(0,c.jsx)("h1",{children:"\ud83c\udf99 EmiBot Voice Companion"}),(0,c.jsx)("p",{children:"Speak to EmiBot and it will respond intelligently, track your goals, and repeat your voice!"}),(0,c.jsxs)("div",{className:"voice-buttons",children:[(0,c.jsx)("button",{className:e?"stop-listen-btn":"start-listen-btn",onClick:e?()=>{g.current&&(g.current.stop(),t(!1))}:()=>{g.current&&(l(""),u(""),g.current.start(),t(!0))},children:e?"Stop Listening":"Start Listening"}),(0,c.jsx)("button",{className:"stop-speak-btn",onClick:()=>{window.speechSynthesis&&window.speechSynthesis.cancel()},children:"Stop Speaking"})]}),h&&(0,c.jsx)("p",{className:"firebase-status",children:h}),(0,c.jsxs)("div",{className:"voice-textbox",children:[(0,c.jsx)("strong",{children:"You:"}),(0,c.jsx)("p",{children:r||"Say something..."})]}),(0,c.jsxs)("div",{className:"voice-textbox bot-text",children:[(0,c.jsx)("strong",{children:"Bot:"}),(0,c.jsx)("p",{children:d||"I'll reply here..."})]})]})]})}},3456:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(5043),i=r(579);function o(){return(0,i.jsx)("div",{className:"emi-avatar",children:(0,i.jsx)("span",{className:"emi-text",children:"Hi, I am Emi!"})})}var s=r(9336),a=r(7958);function c(){const e=(0,n.useRef)(null),{mood:t,setMood:r}=(0,a.X)(),[o,c]=(0,n.useState)(!1),[l,d]=(0,n.useState)(""),u=(0,n.useRef)(null),[h,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>(async function(){try{await Promise.all([s.B0.tinyFaceDetector.loadFromUri("/models"),s.B0.faceExpressionNet.loadFromUri("/models")]),p(!0)}catch(e){d("Model loading failed"),console.error("Model error:",e)}}(),()=>{u.current&&clearInterval(u.current)}),[]);const g=e=>{const t={neutral:{label:"Neutral",emoji:"\ud83d\ude10",background:"linear-gradient(135deg, #e0e0e0, #f5f5f5)"},happy:{label:"Happy",emoji:"\ud83d\ude04",background:"linear-gradient(135deg, #141413ff, #ffa751)"},sad:{label:"Sad",emoji:"\ud83d\ude22",background:"linear-gradient(135deg, #89f7fe, #66a6ff)"},angry:{label:"Angry",emoji:"\ud83d\ude20",background:"linear-gradient(135deg, #f85032, #e73827)"},fearful:{label:"Scared",emoji:"\ud83d\ude28",background:"linear-gradient(135deg, #a18cd1, #fbc2eb)"},disgusted:{label:"Disgusted",emoji:"\ud83e\udd22",background:"linear-gradient(135deg, #56ab2f, #a8e063)"},surprised:{label:"Surprised",emoji:"\ud83d\ude32",background:"linear-gradient(135deg, #f7971e, #ffd200)"}};return t[e]||t.neutral};return(0,i.jsxs)("div",{style:{position:"relative",width:360,margin:"12px auto"},children:[l&&(0,i.jsx)("div",{style:{color:"white"},children:l}),!o&&h&&(0,i.jsx)("button",{onClick:async function(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return void d("Camera access not supported in this browser");let t;try{t=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1}),e.current&&(e.current.srcObject=t,e.current.onloadedmetadata=()=>{e.current.play().catch(e=>console.warn("Video play blocked:",e)),c(!0),function(){u.current&&clearInterval(u.current);const t=new s.ex({inputSize:224,scoreThreshold:.5});async function n(){const n=e.current;if(n&&4===n.readyState)try{const e=await s.PG(n,t).withFaceExpressions();if(e){const t=e.expressions,n=Object.keys(t).reduce((e,r)=>t[e]>t[r]?e:r);r(g(n))}}catch(i){console.error("Detection error:",i)}}u.current=setInterval(n,500)}()})}catch(n){d((null===n||void 0===n?void 0:n.message)||"Camera error"),console.error("Camera error:",n)}},style:{padding:"10px 20px",fontSize:"18px",borderRadius:"8px",border:"none",cursor:"pointer",background:"#ffa751",color:"#000",marginBottom:"12px"},children:"Start Camera"}),(0,i.jsxs)("div",{style:{position:"relative"},children:[(0,i.jsx)("video",{ref:e,width:360,height:270,style:{borderRadius:16,display:o?"block":"none"},muted:!0,playsInline:!0}),o&&(0,i.jsx)("div",{style:{position:"absolute",top:"25%",left:"25%",width:"60%",height:"70%",border:"2px dashed rgba(255,255,255,0.7)",borderRadius:"50%",pointerEvents:"none"}})]}),(0,i.jsx)("div",{style:{textAlign:"center",opacity:.7,fontSize:20,marginTop:8,color:"white"},children:o?"Align your face inside the circle":h?"Click start to enable camera":"Loading models\u2026"}),o&&(0,i.jsxs)("ul",{style:{textAlign:"center",fontSize:25,color:"white",marginTop:4,listStyle:"none",padding:0},children:[(0,i.jsx)("li",{children:"\u2022 Face camera directly"}),(0,i.jsx)("li",{children:"\u2022 Ensure good lighting"}),(0,i.jsx)("li",{children:"\u2022 Hold still briefly"})]}),t&&o&&(0,i.jsxs)("div",{style:{marginTop:16,padding:12,borderRadius:12,textAlign:"center",color:"white",background:t.background,fontSize:16,fontWeight:"bold"},children:[t.emoji," ",t.label]})]})}var l=r(3082);function d(){return(0,i.jsxs)("div",{className:"emi-face-mood-page",children:[(0,i.jsx)("h2",{className:"page-title",children:"EmiBot \u2014 Face Scan Mood"}),(0,i.jsx)(o,{}),(0,i.jsx)(c,{}),(0,i.jsx)(l.default,{})]})}},7318:()=>{},8082:()=>{}}]);
//# sourceMappingURL=907.867b1547.chunk.js.map