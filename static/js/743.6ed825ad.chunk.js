"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[743],{3082:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var n=s(5043),o=s(4790);const r=s.p+"static/media/bot1.03d9c7cfddac41707706.png";var i=s(930),c=s(6667),a=s(579);function l(){const[e,t]=(0,n.useState)(!1),[s,l]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[u,p]=(0,n.useState)(""),w=(0,n.useRef)(null),{addGoal:S}=(0,o.Q)();(0,n.useEffect)(()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return void alert("Your browser does not support Speech Recognition.");const s=new e;s.lang="en-US",s.continuous=!0,s.interimResults=!0,s.onresult=e=>{let t="";for(let s=e.resultIndex;s<e.results.length;s++)t+=e.results[s][0].transcript;l(t),e.results[e.results.length-1].isFinal&&b(t)},s.onend=()=>t(!1),w.current=s},[]);const b=async e=>{const t=e.toLowerCase();(t.includes("i want to")||t.includes("remind me to"))&&S(e);let s="";try{s=await async function(e){try{const t=await fetch("http://localhost:5500/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});return(await t.json()).reply}catch(t){return console.error(t),"Sorry, I couldn't think of a reply."}}(e)}catch(n){s="Sorry, I couldn't process that.",console.error("OpenAI reply error:",n)}h(s),v(s);try{await(0,c.gS)((0,c.rJ)(i.db,"conversations"),{user:e,bot:s,createdAt:c.Dc.now()}),p("\u2705 Conversation saved to Firebase!"),console.log("Conversation saved to Firebase:",{user:e,bot:s})}catch(o){p("\u274c Failed to save conversation."),console.error("Firebase save error:",o)}setTimeout(()=>p(""),5e3)},v=e=>{if(!window.speechSynthesis)return;const t=new SpeechSynthesisUtterance(e);t.lang="en-US",t.pitch=1,t.rate=1,window.speechSynthesis.speak(t)};return(0,a.jsxs)("div",{className:"voice-bot-container",children:[(0,a.jsx)("div",{className:"voice-bot-right",children:(0,a.jsx)("img",{src:r,alt:"Voice AI"})}),(0,a.jsxs)("div",{className:"voice-bot-left",children:[(0,a.jsx)("h1",{children:"\ud83c\udf99 EmiBot Voice Companion"}),(0,a.jsx)("p",{children:"Speak to EmiBot and it will respond intelligently, track your goals, and repeat your voice!"}),(0,a.jsxs)("div",{className:"voice-buttons",children:[(0,a.jsx)("button",{className:e?"stop-listen-btn":"start-listen-btn",onClick:e?()=>{w.current&&(w.current.stop(),t(!1))}:()=>{w.current&&(l(""),h(""),w.current.start(),t(!0))},children:e?"Stop Listening":"Start Listening"}),(0,a.jsx)("button",{className:"stop-speak-btn",onClick:()=>{window.speechSynthesis&&window.speechSynthesis.cancel()},children:"Stop Speaking"})]}),u&&(0,a.jsx)("p",{className:"firebase-status",children:u}),(0,a.jsxs)("div",{className:"voice-textbox",children:[(0,a.jsx)("strong",{children:"You:"}),(0,a.jsx)("p",{children:s||"Say something..."})]}),(0,a.jsxs)("div",{className:"voice-textbox bot-text",children:[(0,a.jsx)("strong",{children:"Bot:"}),(0,a.jsx)("p",{children:d||"I'll reply here..."})]})]})]})}}}]);
//# sourceMappingURL=743.6ed825ad.chunk.js.map